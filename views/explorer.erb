<script src="http://d3js.org/d3.v3.min.js"></script>

<div id='chart'></div>
<script>

var purposeCodes = [{"all_children":1,"children":["11000"],"code":"110","name":"EDUCATION","parent":"100","type":"purpose"},{"all_children":1,"children":["11105.01"],"code":"11105","name":"Education, level unspecified, purpose unspecified or does not fit under any other applicable codes","parent":"111","type":"purpose"},{"all_children":6,"children":["11110.02","11110.03","11110.04","11110.05","11110.06","11110.01"],"code":"11110","name":"Education policy and administrative management","parent":"111","type":"purpose"},{"all_children":25,"children":["11110","11182","11130","11100","11120","11105"],"code":"111","name":"Education, level unspecified","parent":"100","type":"purpose"},{"all_children":6,"children":["11120.01","11120.02","11120.03","11120.04","11120.05","11120.06"],"code":"11120","name":"Education facilities and training","parent":"111","type":"purpose"},{"all_children":3,"children":["11130.03","11130.01","11130.02"],"code":"11130","name":"Teacher training","parent":"111","type":"purpose"},{"all_children":3,"children":["11182.01","11182.02","11182.03"],"code":"11182","name":"Educational research","parent":"111","type":"purpose"},{"all_children":6,"children":["11220.01","11220.02","11220.03","11220.04","11220.05","11220.06"],"code":"11220","name":"Primary education","parent":"112","type":"purpose"},{"all_children":3,"children":["11230.01","11230.02","11230.03"],"code":"11230","name":"Basic life skills for youth and adults ","parent":"112","type":"purpose"},{"all_children":2,"children":["11240.01","11240.02"],"code":"11240","name":"Early childhood education","parent":"112","type":"purpose"},{"all_children":14,"children":["11240","11230","11220"],"code":"112","name":"Basic education","parent":"100","type":"purpose"},{"all_children":7,"children":["11320.02","11320.01","11320.03","11320.04","11320.05","11320.06","11320.07"],"code":"11320","name":"Secondary education","parent":"113","type":"purpose"},{"all_children":13,"children":["11320","11330"],"code":"113","name":"Secondary education","parent":"100","type":"purpose"},{"all_children":4,"children":["11330.01","11330.02","11330.03","11330.04"],"code":"11330","name":"Vocational training","parent":"113","type":"purpose"},{"all_children":7,"children":["11420.01","11420.02","11420.03","11420.04","11420.05","11420.06","11420.07"],"code":"11420","name":"Higher education","parent":"114","type":"purpose"},{"all_children":5,"children":["11430.01","11430.02","11430.03","11430.04","11430.05"],"code":"11430","name":"Advanced technical and managerial training","parent":"114","type":"purpose"},{"all_children":14,"children":["11430","11420"],"code":"114","name":"Post-secondary education","parent":"100","type":"purpose"},{"all_children":1,"children":["12000"],"code":"120","name":"HEALTH","parent":"100","type":"purpose"},{"all_children":1,"children":["12105.01"],"code":"12105","name":"Health, general, purpose unspecified or does not fit under any other applicable codes","parent":"121","type":"purpose"},{"all_children":23,"children":["12105","12100","12110","12181","12182","12191"],"code":"121","name":"Health, general","parent":"100","type":"purpose"},{"all_children":5,"children":["12110.01","12110.02","12110.03","12110.04","12110.05"],"code":"12110","name":"Health policy and administrative management","parent":"121","type":"purpose"},{"all_children":1,"children":["12181.01"],"code":"12181","name":"Medical education/training","parent":"121","type":"purpose"},{"all_children":1,"children":["12182.01"],"code":"12182","name":"Medical research","parent":"121","type":"purpose"},{"all_children":9,"children":["12191.03","12191.01","12191.02","12191.04","12191.05","12191.06","12191.07","12191.08","12191.09"],"code":"12191","name":"Medical services","parent":"121","type":"purpose"},{"all_children":5,"children":["12220.04","12220.01","12220.02","12220.05","12220.03"],"code":"12220","name":"Basic health care","parent":"122","type":"purpose"},{"all_children":31,"children":["12220","12230","12261","12281","12240","12250"],"code":"122","name":"Basic health","parent":"100","type":"purpose"},{"all_children":3,"children":["12230.03","12230.01","12230.02"],"code":"12230","name":"Basic health infrastructure","parent":"122","type":"purpose"},{"all_children":6,"children":["12240.05","12240.01","12240.02","12240.03","12240.04","12240.06"],"code":"12240","name":"Basic nutrition","parent":"122","type":"purpose"},{"all_children":7,"children":["12250.06","12250.01","12250.02","12250.03","12250.04","12250.05","12250.07"],"code":"12250","name":"Infectious & Parasitic disease control","parent":"122","type":"purpose"},{"all_children":3,"children":["12261.02","12261.01","12261.03"],"code":"12261","name":"Health education","parent":"122","type":"purpose"},{"all_children":1,"children":["12281.01"],"code":"12281","name":"Health personnel development","parent":"122","type":"purpose"},{"all_children":32,"children":["13000","13005","13010","13020","13030","13040","13081"],"code":"130","name":"POPULATION POLICIES/ PROGRAMMES AND REPRODUCTIVE HEALTH","parent":"100","type":"purpose"},{"all_children":1,"children":["13005.01"],"code":"13005","name":"Population policies/ programmes and reproductive health, purpose unspecified or does not fit under any other applicable codes","parent":"130","type":"purpose"},{"all_children":7,"children":["13010.03","13010.01","13010.02","13010.04","13010.05","13010.06","13010.07"],"code":"13010","name":"Population policy and administrative management","parent":"130","type":"purpose"},{"all_children":6,"children":["13020.06","13020.01","13020.02","13020.03","13020.04","13020.05"],"code":"13020","name":"Reproductive health care","parent":"130","type":"purpose"},{"all_children":5,"children":["13030.04","13030.01","13030.02","13030.03","13030.05"],"code":"13030","name":"Family planning","parent":"130","type":"purpose"},{"all_children":5,"children":["13040.03","13040.01","13040.02","13040.04","13040.05"],"code":"13040","name":"STD control including HIV/AIDS","parent":"130","type":"purpose"},{"all_children":1,"children":["13081.01"],"code":"13081","name":"Personnel development for population and reproductive health","parent":"130","type":"purpose"},{"all_children":1,"children":["14005.01"],"code":"14005","name":"Water Supply and Sanitation, purpose unspecified or does not fit under any other applicable codes","parent":"140","type":"purpose"},{"all_children":3,"children":["14010.03","14010.01","14010.02"],"code":"14010","name":"Water resources policy and administrative management","parent":"140","type":"purpose"},{"all_children":4,"children":["14015.02","14015.04","14015.01","14015.03"],"code":"14015","name":"Water resources protection","parent":"140","type":"purpose"},{"all_children":294,"children":["140","160","111","152","112","113","114","120","121","122","130","150","151","110"],"code":"100","name":"SOCIAL INFRASTRUCTURE AND SERVICES","type":"purpose"},{"all_children":6,"children":["14020.03","14020.01","14020.02","14020.04","14020.05","14020.06"],"code":"14020","name":"Water supply and sanitation - large systems","parent":"140","type":"purpose"},{"all_children":3,"children":["14030.03","14030.01","14030.02"],"code":"14030","name":"Basic drinking water supply and basic sanitation","parent":"140","type":"purpose"},{"all_children":4,"children":["14040.04","14040.01","14040.02","14040.03"],"code":"14040","name":"River development","parent":"140","type":"purpose"},{"all_children":39,"children":["14040","14000","14005","14010","14015","14082","14030","14020","14081","14050"],"code":"140","name":"WATER SUPPLY AND SANITATION","parent":"100","type":"purpose"},{"all_children":5,"children":["14050.05","14050.01","14050.02","14050.03","14050.04"],"code":"14050","name":"Waste management/disposal","parent":"140","type":"purpose"},{"all_children":1,"children":["14081.01"],"code":"14081","name":"Education and training in water supply and sanitation ","parent":"140","type":"purpose"},{"all_children":2,"children":["14082.02","14082.01"],"code":"14082","name":"Water Research","parent":"140","type":"purpose"},{"all_children":1,"children":["15000"],"code":"150","name":"GOVERNMENT AND CIVIL SOCIETY","parent":"100","type":"purpose"},{"all_children":1,"children":["15105.01"],"code":"15105","name":"Government and civil society, purpose unspecified or does not fit under any other applicable codes","parent":"151","type":"purpose"},{"all_children":5,"children":["15110.04","15110.01","15110.02","15110.03","15110.05"],"code":"15110","name":"Economic and development policy/planning","parent":"151","type":"purpose"},{"all_children":37,"children":["15110","15100","15105","15120","15130","15140","15150"],"code":"151","name":"Government and civil society, general","parent":"100","type":"purpose"},{"all_children":4,"children":["15120.02","15120.04","15120.01","15120.03"],"code":"15120","name":"Public sector financial management","parent":"151","type":"purpose"},{"all_children":6,"children":["15130.04","15130.06","15130.01","15130.02","15130.03","15130.05"],"code":"15130","name":"Legal and judicial development","parent":"151","type":"purpose"},{"all_children":5,"children":["15140.04","15140.01","15140.02","15140.03","15140.05"],"code":"15140","name":"Government administration ","parent":"151","type":"purpose"},{"all_children":9,"children":["15150.08","15150.09","15150.01","15150.02","15150.03","15150.04","15150.05","15150.06","15150.07"],"code":"15150","name":"Strengthening civil society","parent":"151","type":"purpose"},{"all_children":21,"children":["15200","15220","15230","15240","15250","15261","15205","15210"],"code":"152","name":"Conflict prevention and resolution, peace and security","parent":"100","type":"purpose"},{"all_children":1,"children":["15205.01"],"code":"15205","name":"Conflict prevention and resolution, peace and security, purpose unspecified or does not fit under any other applicable codes","parent":"152","type":"purpose"},{"all_children":2,"children":["15210.01","15210.02"],"code":"15210","name":"Security system management and reform","parent":"152","type":"purpose"},{"all_children":1,"children":["15220.01"],"code":"15220","name":"Civilian peace-building, conflict prevention and resolution","parent":"152","type":"purpose"},{"all_children":1,"children":["15230.01"],"code":"15230","name":"Post-conflict peace-building (UN)","parent":"152","type":"purpose"},{"all_children":4,"children":["15240.03","15240.02","15240.01","15240.04"],"code":"15240","name":"Reintegration and SALW control","parent":"152","type":"purpose"},{"all_children":1,"children":["15250.01"],"code":"15250","name":"Land mine clearance","parent":"152","type":"purpose"},{"all_children":3,"children":["15261.03","15261.01","15261.02"],"code":"15261","name":"Child soldiers (Prevention and demobilisation) ","parent":"152","type":"purpose"},{"all_children":11,"children":["16010.06","16010.11","16010.01","16010.02","16010.03","16010.04","16010.05","16010.07","16010.08","16010.09","16010.10"],"code":"16010","name":"Social/ welfare services","parent":"160","type":"purpose"},{"all_children":7,"children":["16020.07","16020.01","16020.02","16020.03","16020.04","16020.05","16020.06"],"code":"16020","name":"Employment policy and administrative management","parent":"160","type":"purpose"},{"all_children":3,"children":["16030.03","16030.01","16030.02"],"code":"16030","name":"Housing policy and administrative management","parent":"160","type":"purpose"},{"all_children":1,"children":["16050.01"],"code":"16050","name":"Multisector aid for social services ","parent":"160","type":"purpose"},{"all_children":1,"children":["16081.01"],"code":"16081","name":"Other social infrastructure and services, education and training","parent":"160","type":"purpose"},{"all_children":28,"children":["16081","16010","16020","16030","16050"],"code":"160","name":"OTHER SOCIAL INFRASTRUCTURE AND SERVICES","parent":"100","type":"purpose"},{"all_children":1,"children":["21005.01"],"code":"21005","name":"Transport and Storage, purpose unspecified or does not fit under any other applicable codes","parent":"210","type":"purpose"},{"all_children":4,"children":["21010.03","21010.01","21010.02","21010.04"],"code":"21010","name":"Transport policy and administrative management","parent":"210","type":"purpose"},{"all_children":3,"children":["21020.02","21020.01","21020.03"],"code":"21020","name":"Road transport","parent":"210","type":"purpose"},{"all_children":29,"children":["21020","21030","21040","21050","21061","21000","21081","21005","21010"],"code":"210","name":"TRANSPORT AND STORAGE","parent":"200","type":"purpose"},{"all_children":3,"children":["21030.02","21030.01","21030.03"],"code":"21030","name":"Rail transport","parent":"210","type":"purpose"},{"all_children":4,"children":["21040.03","21040.01","21040.02","21040.04"],"code":"21040","name":"Water transport","parent":"210","type":"purpose"},{"all_children":3,"children":["21050.03","21050.01","21050.02"],"code":"21050","name":"Air transport","parent":"210","type":"purpose"},{"all_children":1,"children":["21061.01"],"code":"21061","name":"Storage","parent":"210","type":"purpose"},{"all_children":1,"children":["21081.01"],"code":"21081","name":"Education and training in transport and storage","parent":"210","type":"purpose"},{"all_children":1,"children":["22005.01"],"code":"22005","name":"Communications, purpose unspecified or does not fit under any other applicable codes","parent":"220","type":"purpose"},{"all_children":4,"children":["22010.04","22010.03","22010.01","22010.02"],"code":"22010","name":"Communications policy and administrative management","parent":"220","type":"purpose"},{"all_children":24,"children":["22010","22000","22005","22020","22030","22040","22081"],"code":"220","name":"COMMUNICATIONS","parent":"200","type":"purpose"},{"all_children":4,"children":["22020.02","22020.04","22020.01","22020.03"],"code":"22020","name":"Telecommunications","parent":"220","type":"purpose"},{"all_children":3,"children":["22030.01","22030.03","22030.02"],"code":"22030","name":"Radio/television/print media","parent":"220","type":"purpose"},{"all_children":4,"children":["22040.04","22040.02","22040.03","22040.01"],"code":"22040","name":"Information and communication technology (ICT)","parent":"220","type":"purpose"},{"all_children":1,"children":["22081.01"],"code":"22081","name":"Communications, education and training.","parent":"220","type":"purpose"},{"all_children":1,"children":["23005.01"],"code":"23005","name":"Energy generation and supply, purpose unspecified or does not fit under any other applicable codes","parent":"230","type":"purpose"},{"all_children":38,"children":["23005","23010","23020","23030","23040","23050","23055","23081","23082","23000"],"code":"230","name":"ENERGY GENERATION AND SUPPLY","parent":"200","type":"purpose"},{"all_children":5,"children":["23010.03","23010.05","23010.01","23010.02","23010.04"],"code":"23010","name":"Energy policy and administrative management","parent":"230","type":"purpose"},{"all_children":6,"children":["23020.02","23020.06","23020.04","23020.01","23020.05","23020.03"],"code":"23020","name":"Power generation/non-renewable sources ","parent":"230","type":"purpose"},{"all_children":7,"children":["23030.06","23030.01","23030.02","23030.03","23030.04","23030.05","23030.07"],"code":"23030","name":"Power generation/renewable sources ","parent":"230","type":"purpose"},{"all_children":3,"children":["23040.02","23040.01","23040.03"],"code":"23040","name":"Electrical transmission/ distribution","parent":"230","type":"purpose"},{"all_children":2,"children":["23050.02","23050.01"],"code":"23050","name":"Gas distribution","parent":"230","type":"purpose"},{"all_children":2,"children":["23055.01","23055.02"],"code":"23055","name":"Petroleum distribution and storage","parent":"230","type":"purpose"},{"all_children":1,"children":["23081.01"],"code":"23081","name":"Energy education/training","parent":"230","type":"purpose"},{"all_children":1,"children":["23082.01"],"code":"23082","name":"Energy research","parent":"230","type":"purpose"},{"all_children":20,"children":["24000","24005","24010","24020","24030","24040","24081"],"code":"240","name":"BANKING AND FINANCIAL SERVICES","parent":"200","type":"purpose"},{"all_children":1,"children":["24005.01"],"code":"24005","name":"Banking and financial services, purpose unspecified or does not fit under any other applicable codes","parent":"240","type":"purpose"},{"all_children":4,"children":["24010.03","24010.04","24010.01","24010.02"],"code":"24010","name":"Financial policy and administrative management","parent":"240","type":"purpose"},{"all_children":1,"children":["24020.01"],"code":"24020","name":"Monetary institutions","parent":"240","type":"purpose"},{"all_children":3,"children":["24030.01","24030.03","24030.02"],"code":"24030","name":"Formal sector financial intermediaries","parent":"240","type":"purpose"},{"all_children":3,"children":["24040.02","24040.03","24040.01"],"code":"24040","name":"Informal/semi-formal financial intermediaries","parent":"240","type":"purpose"},{"all_children":1,"children":["24081.01"],"code":"24081","name":"Education/training in banking and financial services","parent":"240","type":"purpose"},{"all_children":8,"children":["25010.06","25010.08","25010.01","25010.02","25010.03","25010.04","25010.05","25010.07"],"code":"25010","name":"Business support services and institutions","parent":"250","type":"purpose"},{"all_children":1,"children":["25020.01"],"code":"25020","name":"Privatisation","parent":"250","type":"purpose"},{"all_children":129,"children":["250","210","230","240","220"],"code":"200","name":"ECONOMIC INFRASTRUCTURE AND SERVICES","type":"purpose"},{"all_children":1,"children":["25081.01"],"code":"25081","name":"Business education and training","parent":"250","type":"purpose"},{"all_children":13,"children":["25081","25010","25020"],"code":"250","name":"BUSINESS AND OTHER SERVICES","parent":"200","type":"purpose"},{"all_children":1,"children":["31000"],"code":"310","name":"AGRICULTURE, FORESTRY, FISHING","parent":"300","type":"purpose"},{"all_children":1,"children":["31105.01"],"code":"31105","name":"Agriculture, purpose unspecified or does not fit under any other applicable codes","parent":"311","type":"purpose"},{"all_children":5,"children":["31110.01","31110.02","31110.03","31110.04","31110.05"],"code":"31110","name":"Agricultural policy and administrative management","parent":"311","type":"purpose"},{"all_children":9,"children":["31120.06","31120.09","31120.07","31120.08","31120.01","31120.02","31120.03","31120.04","31120.05"],"code":"31120","name":"Agricultural development","parent":"311","type":"purpose"},{"all_children":7,"children":["31130.01","31130.02","31130.03","31130.04","31130.05","31130.06","31130.07"],"code":"31130","name":"Agricultural land resources","parent":"311","type":"purpose"},{"all_children":5,"children":["31140.01","31140.05","31140.02","31140.03","31140.04"],"code":"31140","name":"Agricultural water resources","parent":"311","type":"purpose"},{"all_children":51,"children":["31140","31150","31105","31100","31130","31120","31110","31181","31182","31191"],"code":"311","name":"Agriculture","parent":"300","type":"purpose"},{"all_children":4,"children":["31150.02","31150.04","31150.01","31150.03"],"code":"31150","name":"Agricultural inputs","parent":"311","type":"purpose"},{"all_children":2,"children":["31181.02","31181.01"],"code":"31181","name":"Agricultural education/training","parent":"311","type":"purpose"},{"all_children":3,"children":["31182.03","31182.01","31182.02"],"code":"31182","name":"Agricultural research ","parent":"311","type":"purpose"},{"all_children":5,"children":["31191.01","31191.02","31191.03","31191.04","31191.05"],"code":"31191","name":"Agricultural services, purpose","parent":"311","type":"purpose"},{"all_children":1,"children":["31205.01"],"code":"31205","name":"Forestry, purpose unspecified or does not fit under any other applicable codes","parent":"312","type":"purpose"},{"all_children":4,"children":["31210.03","31210.01","31210.02","31210.04"],"code":"31210","name":"Forestry policy and administrative management","parent":"312","type":"purpose"},{"all_children":8,"children":["31220.07","31220.01","31220.02","31220.03","31220.04","31220.05","31220.06","31220.08"],"code":"31220","name":"Forestry development","parent":"312","type":"purpose"},{"all_children":1,"children":["31281.01"],"code":"31281","name":"Forestry education/training","parent":"312","type":"purpose"},{"all_children":1,"children":["31282.01"],"code":"31282","name":"Forestry research","parent":"312","type":"purpose"},{"all_children":3,"children":["31291.03","31291.01","31291.02"],"code":"31291","name":"Forestry services","parent":"312","type":"purpose"},{"all_children":24,"children":["31291","31210","31220","31205","31281","31282"],"code":"312","name":"Forestry","parent":"300","type":"purpose"},{"all_children":1,"children":["31305.01"],"code":"31305","name":"Fishing, purpose unspecified or does not fit under any other applicable codes","parent":"313","type":"purpose"},{"all_children":3,"children":["31310.02","31310.01","31310.03"],"code":"31310","name":"Fishing policy and administrative management","parent":"313","type":"purpose"},{"all_children":5,"children":["31320.04","31320.01","31320.02","31320.03","31320.05"],"code":"31320","name":"Fishery development","parent":"313","type":"purpose"},{"all_children":3,"children":["31330.02","31330.01","31330.03"],"code":"31330","name":"Fishing Development","parent":"313","type":"purpose"},{"all_children":29,"children":["31330","31391","31381","31382","31300","31305","31310","31320"],"code":"313","name":"Fishing","parent":"300","type":"purpose"},{"all_children":1,"children":["31381.01"],"code":"31381","name":"Fishery education/training","parent":"313","type":"purpose"},{"all_children":3,"children":["31382.03","31382.01","31382.02"],"code":"31382","name":"Fishery research","parent":"313","type":"purpose"},{"all_children":5,"children":["31391.04","31391.05","31391.01","31391.02","31391.03"],"code":"31391","name":"Fishery services","parent":"313","type":"purpose"},{"all_children":1,"children":["32000"],"code":"320","name":"INDUSTRY, MINING, CONSTRUCTION","parent":"300","type":"purpose"},{"all_children":206,"children":["320","310","311","312","313","321","322","323","331","332","330"],"code":"300","name":"PRODUCTION SECTORS","type":"purpose"},{"all_children":1,"children":["32105.01"],"code":"32105","name":"Industry, purpose unspecified (includes manufacturing of goods not specified below) or does not fit under any other applicable codes","parent":"321","type":"purpose"},{"all_children":3,"children":["32110.03","32110.01","32110.02"],"code":"32110","name":"Industrial policy and administrative management","parent":"321","type":"purpose"},{"all_children":17,"children":["32120.13","32120.14","32120.15","32120.17","32120.16","32120.01","32120.02","32120.03","32120.04","32120.05","32120.06","32120.07","32120.08","32120.09","32120.10","32120.11","32120.12"],"code":"32120","name":"Industrial development","parent":"321","type":"purpose"},{"all_children":2,"children":["32130.01","32130.02"],"code":"32130","name":"Small and medium-sized enterprises (SME) development","parent":"321","type":"purpose"},{"all_children":1,"children":["32140.01"],"code":"32140","name":"Cottage industries and handicraft","parent":"321","type":"purpose"},{"all_children":1,"children":["32181.01"],"code":"32181","name":"Industry education and training","parent":"321","type":"purpose"},{"all_children":1,"children":["32182.01"],"code":"32182","name":"Technological research and development","parent":"321","type":"purpose"},{"all_children":4,"children":["32191.03","32191.04","32191.02","32191.01"],"code":"32191","name":"Industry services","parent":"321","type":"purpose"},{"all_children":38,"children":["32191","32105","32110","32120","32130","32140","32181","32182"],"code":"321","name":"Industry","parent":"300","type":"purpose"},{"all_children":1,"children":["32205.01"],"code":"32205","name":"Mineral resources and mining, purpose unspecified or does not fit under any other applicable codes","parent":"322","type":"purpose"},{"all_children":4,"children":["32210.01","32210.02","32210.03","32210.04"],"code":"32210","name":"Mineral/mining policy and administrative management","parent":"322","type":"purpose"},{"all_children":11,"children":["32220.01","32220.02","32220.03","32220.04","32220.05","32220.06","32220.07","32220.08","32220.09","32220.10","32220.11"],"code":"32220","name":"Mineral/Metal prospection and exploration","parent":"322","type":"purpose"},{"all_children":22,"children":["32220","32210","32281","32205","32200"],"code":"322","name":"Mineral resources and mining","parent":"300","type":"purpose"},{"all_children":1,"children":["32281.01"],"code":"32281","name":"Mining Education / Training","parent":"322","type":"purpose"},{"all_children":3,"children":["32310"],"code":"323","name":"Construction","parent":"300","type":"purpose"},{"all_children":2,"children":["32310.01","32310.02"],"code":"32310","name":"Construction policy and administrative management","parent":"323","type":"purpose"},{"all_children":1,"children":["33105.01"],"code":"33105","name":"Trade policy and regulations, purpose unspecified (includes trade and trade promotion activities) or does not fit under any other applicable codes","parent":"331","type":"purpose"},{"all_children":5,"children":["33110.01","33110.02","33110.03","33110.04","33110.05"],"code":"33110","name":"Trade policy and administrative management","parent":"331","type":"purpose"},{"all_children":4,"children":["33120.04","33120.01","33120.02","33120.03"],"code":"33120","name":"Trade facilitation","parent":"331","type":"purpose"},{"all_children":2,"children":["33130.02","33130.01"],"code":"33130","name":"Regional trade agreements (RTAs)","parent":"331","type":"purpose"},{"all_children":1,"children":["33140.01"],"code":"33140","name":"Multilateral trade negotiations","parent":"331","type":"purpose"},{"all_children":21,"children":["33140","33100","33105","33110","33120","33130","33181"],"code":"331","name":"Trade policy and regulations","parent":"300","type":"purpose"},{"all_children":1,"children":["33181.01"],"code":"33181","name":"Trade education/training","parent":"331","type":"purpose"},{"all_children":5,"children":["33210"],"code":"332","name":"Tourism","parent":"300","type":"purpose"},{"all_children":4,"children":["33210.01","33210.02","33210.03","33210.04"],"code":"33210","name":"Tourism policy and administrative management","parent":"332","type":"purpose"},{"all_children":1,"children":["41005.01"],"code":"41005","name":"General environmental protection, purpose unspecified (includes miscellaneous conservation and protection measures not mentioned below) or does not fit under any other applicable codes","parent":"410","type":"purpose"},{"all_children":3,"children":["41010.01","41010.02","41010.03"],"code":"41010","name":"Environmental policy and administrative management","parent":"410","type":"purpose"},{"all_children":26,"children":["41010","41050","41081","41000","41005","41082","41020","41030","41040"],"code":"410","name":"GENERAL ENVIRONMENTAL PROTECTION","parent":"400","type":"purpose"},{"all_children":3,"children":["41020.01","41020.02","41020.03"],"code":"41020","name":"Biosphere protection","parent":"410","type":"purpose"},{"all_children":3,"children":["41030.02","41030.01","41030.03"],"code":"41030","name":"Bio-diversity","parent":"410","type":"purpose"},{"all_children":1,"children":["41040.01"],"code":"41040","name":"Site preservation","parent":"410","type":"purpose"},{"all_children":61,"children":["410","430","420"],"code":"400","name":"MULTISECTOR/CROSS-CUTTING","type":"purpose"},{"all_children":3,"children":["41050.02","41050.03","41050.01"],"code":"41050","name":"Flood prevention/control","parent":"410","type":"purpose"},{"all_children":1,"children":["41081.01"],"code":"41081","name":"Environmental education/ training","parent":"410","type":"purpose"},{"all_children":2,"children":["41082.01","41082.02"],"code":"41082","name":"Environmental research","parent":"410","type":"purpose"},{"all_children":7,"children":["42010"],"code":"420","name":"WOMEN","parent":"400","type":"purpose"},{"all_children":6,"children":["42010.06","42010.01","42010.02","42010.03","42010.04","42010.05"],"code":"42010","name":"Women in development","parent":"420","type":"purpose"},{"all_children":1,"children":["43010.01"],"code":"43010","name":"Multisector aid","parent":"430","type":"purpose"},{"all_children":6,"children":["43030.03","43030.01","43030.02","43030.04","43030.05","43030.06"],"code":"43030","name":"Urban development and management","parent":"430","type":"purpose"},{"all_children":8,"children":["43040.01","43040.04","43040.05","43040.06","43040.07","43040.08","43040.03","43040.02"],"code":"43040","name":"Rural development","parent":"430","type":"purpose"},{"all_children":2,"children":["43050.02","43050.01"],"code":"43050","name":"Non-agricultural alternative development","parent":"430","type":"purpose"},{"all_children":1,"children":["43081.01"],"code":"43081","name":"Multisector education/training","parent":"430","type":"purpose"},{"all_children":1,"children":["43082.01"],"code":"43082","name":"Research/scientific institutions","parent":"430","type":"purpose"},{"all_children":25,"children":["43082","43010","43030","43040","43050","43081"],"code":"430","name":"OTHER","parent":"400","type":"purpose"},{"all_children":6,"children":["51010"],"code":"510","name":"GENERAL BUDGET SUPPORT","parent":"500","type":"purpose"},{"all_children":5,"children":["51010.02","51010.03","51010.04","51010.05","51010.01"],"code":"51010","name":"General budget support","parent":"510","type":"purpose"},{"all_children":24,"children":["510","530","520"],"code":"500","name":"COMMODITY AID AND GENERAL PROGRAMME ASSISTANCE","type":"purpose"},{"all_children":4,"children":["52010"],"code":"520","name":"DEVELOPMENT AID/FOOD SECURITY ASSISTANCE","parent":"500","type":"purpose"},{"all_children":3,"children":["52010.02","52010.03","52010.01"],"code":"52010","name":"Food aid/Food security programmes","parent":"520","type":"purpose"},{"all_children":3,"children":["53030.02","53030.03","53030.01"],"code":"53030","name":"Import support (capital goods)","parent":"530","type":"purpose"},{"all_children":4,"children":["53040.03","53040.04","53040.02","53040.01"],"code":"53040","name":"Import support (commodities)","parent":"530","type":"purpose"},{"all_children":11,"children":["53040","53030","53050"],"code":"530","name":"OTHER COMMODITY ASSISTANCE","parent":"500","type":"purpose"},{"all_children":1,"children":["53050.01"],"code":"53050","name":"Export Support","parent":"530","type":"purpose"},{"all_children":4,"children":["60010.01","60010.02","60010.03","60010.04"],"code":"60010","name":"Action relating to debt","parent":"600","type":"purpose"},{"all_children":2,"children":["60020.02","60020.01"],"code":"60020","name":"Debt forgiveness ","parent":"600","type":"purpose"},{"all_children":1,"children":["60030.01"],"code":"60030","name":"Relief of multilateral debt","parent":"600","type":"purpose"},{"all_children":12,"children":["60030","60040","60010","60020"],"code":"600","name":"ACTION RELATING TO DEBT","type":"purpose"},{"all_children":1,"children":["60040.01"],"code":"60040","name":"Rescheduling and refinancing","parent":"600","type":"purpose"},{"all_children":1,"children":["72010.01"],"code":"72010","name":"Material relief assistance and services","parent":"720","type":"purpose"},{"all_children":1,"children":["72020.01"],"code":"72020","name":"Emergency health services/support","parent":"720","type":"purpose"},{"all_children":1,"children":["72030.01"],"code":"72030","name":"Water and sanitation services/support","parent":"720","type":"purpose"},{"all_children":1,"children":["72040.01"],"code":"72040","name":"Emergency food aid","parent":"720","type":"purpose"},{"all_children":1,"children":["72050.01"],"code":"72050","name":"Relief co-ordination; protection and support services","parent":"720","type":"purpose"},{"all_children":11,"children":["72050","72020","72010","72040","72030","72000"],"code":"720","name":"EMERGENCY RESPONSE","parent":"700","type":"purpose"},{"all_children":6,"children":["73010"],"code":"730","name":"RECONSTRUCTION RELIEF","parent":"700","type":"purpose"},{"all_children":5,"children":["73010.03","73010.01","73010.04","73010.05","73010.02"],"code":"73010","name":"Reconstruction relief and rehabilitation","parent":"730","type":"purpose"},{"all_children":10,"children":["74010"],"code":"740","name":"DISASTER PREVENTION AND PREPAREDNESS","parent":"700","type":"purpose"},{"all_children":9,"children":["74010.09","74010.06","74010.07","74010.08","74010.01","74010.02","74010.03","74010.04","74010.05"],"code":"74010","name":"Disaster prevention and preparedness","parent":"740","type":"purpose"},{"all_children":31,"children":["740","70000","720","730"],"code":"700","name":"HUMANITARIAN AID","type":"purpose"},{"all_children":2,"children":["91010"],"code":"910","name":"ADMINISTRATIVE COSTS OF DONORS","parent":"900","type":"purpose"},{"all_children":1,"children":["91010.01"],"code":"91010","name":"Administrative costs","parent":"910","type":"purpose"},{"all_children":1,"children":["92005.01"],"code":"92005","name":"Support to non-governmental organizations and government organizations, purpose unspecified or does not fit under any other applicable codes","parent":"920","type":"purpose"},{"all_children":1,"children":["92010.01"],"code":"92010","name":"Support to national NGOs","parent":"920","type":"purpose"},{"all_children":9,"children":["92010","92030","92000","92005","92020"],"code":"920","name":"SUPPORT TO NON- GOVERNMENTAL ORGANISATIONS (NGOs) AND GOVERNMENT ORGANIZATIONS","parent":"900","type":"purpose"},{"all_children":1,"children":["92020.01"],"code":"92020","name":"Support to international NGOs","parent":"920","type":"purpose"},{"all_children":1,"children":["92030.01"],"code":"92030","name":"Support to local and regional NGOs","parent":"920","type":"purpose"},{"all_children":2,"children":["93010"],"code":"930","name":"Refugees in donor countries","parent":"900","type":"purpose"},{"all_children":1,"children":["93010.01"],"code":"93010","name":"Refugees in Donor Countries","parent":"930","type":"purpose"},{"all_children":1,"children":["99810.01"],"code":"99810","name":"Sectors not specified","parent":"998","type":"purpose"},{"all_children":1,"children":["99820.01"],"code":"99820","name":"Promotion of development awareness","parent":"998","type":"purpose"},{"all_children":4,"children":["99820","99810"],"code":"998","name":"UNALLOCATED/  UNSPECIFIED","parent":"900","type":"purpose"},{"all_children":0,"children":[],"code":"11000","name":"Education, combinations of purposes","parent":"110","type":"purpose"},{"all_children":0,"children":[],"code":"11100","name":"Education, level unspecified, combinations of purposes","parent":"111","type":"purpose"},{"all_children":0,"children":[],"code":"12000","name":"Health, combination of general, basic, and population policy/reproductive health purposes","parent":"120","type":"purpose"},{"all_children":0,"children":[],"code":"12100","name":"Health, general, combinations of activities","parent":"121","type":"purpose"},{"all_children":0,"children":[],"code":"13000","name":"Population policies/ programmes and reproductive health, combinations of activities","parent":"130","type":"purpose"},{"all_children":0,"children":[],"code":"14000","name":"Water Supply and Sanitation, combination of purposes","parent":"140","type":"purpose"},{"all_children":0,"children":[],"code":"15000","name":"Government and civil society, combination of activities","parent":"150","type":"purpose"},{"all_children":0,"children":[],"code":"15100","name":"Government and civil society, general, combination of activities","parent":"151","type":"purpose"},{"all_children":0,"children":[],"code":"15200","name":"Conflict prevention and resolution, peace and security, combinations of activities","parent":"152","type":"purpose"},{"all_children":0,"children":[],"code":"21000","name":"Transport and Storage, combination of purposes","parent":"210","type":"purpose"},{"all_children":0,"children":[],"code":"22000","name":"Communications, combinations of activities","parent":"220","type":"purpose"},{"all_children":0,"children":[],"code":"23000","name":"Energy generation and supply, combinations of activities","parent":"230","type":"purpose"},{"all_children":0,"children":[],"code":"24000","name":"Banking and financial services, combinations of activities","parent":"240","type":"purpose"},{"all_children":0,"children":[],"code":"31000","name":"Agriculture, combination of purposes in Agriculture, Forestry, Fishing","parent":"310","type":"purpose"},{"all_children":0,"children":[],"code":"31100","name":"Agriculture, combinations of purposes in Agriculture, Agro-industry, Agribusiness","parent":"311","type":"purpose"},{"all_children":0,"children":[],"code":"31300","name":"Fishing, combination of activities","parent":"313","type":"purpose"},{"all_children":0,"children":[],"code":"32000","name":"Industry, combination of purposes Industry, Mining and Construction","parent":"320","type":"purpose"},{"all_children":0,"children":[],"code":"32200","name":"Mineral resources and mining, combination of purposes","parent":"322","type":"purpose"},{"all_children":0,"children":[],"code":"330","name":"TRADE AND TOURISM","parent":"300","type":"purpose"},{"all_children":0,"children":[],"code":"33100","name":"Trade policy and regulations, combination of purposes","parent":"331","type":"purpose"},{"all_children":0,"children":[],"code":"41000","name":"General environmental protection, combinations of purposes","parent":"410","type":"purpose"},{"all_children":0,"children":[],"code":"70000","name":"Emergency Assistance and Reconstruction, combinations of purposes","parent":"700","type":"purpose"},{"all_children":0,"children":[],"code":"72000","name":"Emergency Response, combination of purposes","parent":"720","type":"purpose"},{"all_children":0,"children":[],"code":"92000","name":"Support to non-governmental organizations and government organizations, combination of purposes","parent":"920","type":"purpose"},{"all_children":0,"children":[],"code":"12005","created_at":"2013-01-29T18:07:57Z","name":"Health, purpose unspecified or doesn't fit under any other applicable codes","parent":"120","type":"purpose","updated_at":"2013-01-29T18:25:34Z"}]


var j=1,
    w = 840,
    h = w,
    r = w / 2,
    x = d3.scale.linear().range([0, 2 * Math.PI]),
    y = d3.scale.pow().exponent(1.5).domain([0,1]).range([1, r]),
    p = 5,
    c = d3.scale.linear().range(['#ddd', 'red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'violet'])
    .domain([0, 1, 250/6, 2*(250/6), 3*(250/6),4*(250/6),5*(250/6), 6*(250/6), ]),
    duration = 500,
    minWedge = .075;
    minWedgeText = 3.5;
    minWedgeTextL = 60;
    w+=400;

    

function revColor (c) {
  if (c==0) {return '#ddd'}
  else if (c>230&&c<=255) {
    newColor = d3.scale.linear().range(['#eee','#777','#eee']).domain([231,232, 244])
  }
  else if (c>217&&c<=230) {
    newColor = d3.scale.linear().range(['indigo','violet']).domain([218,  230])
  }
  else if (c>212&&c<=217) {
    newColor = d3.scale.linear().range(['darkblue','#253cb7']).domain([213, 217])
  }
  else if (c>203&&c<=212) {
    newColor = d3.scale.linear().range(['royalblue', '#253cb7','royalblue']).domain([204,205, 212])
  }
  else if (c>183&&c<=203) {
    newColor = d3.scale.linear().range(['green','#80c000']).domain([184,203])
  }
  else if (c>123&&c<=183) {
    newColor = d3.scale.linear().range(['yellow','#90c000','yellow']).domain([124,125, 183])
  }
    else if (c>81&&c<=123) {
    newColor = d3.scale.linear().range(['orange','yellow','orange']).domain([82, 83, 123])
  }
  else if (c>0&&c<=81) {
    newColor = d3.scale.linear().range(['red','orange', 'red']).domain([1,2, 81])
  }
  return newColor(c);
}

var vis = d3.select("#chart")
    .append("svg")
        .attr("width", w + p * 2)
        .attr("height", h + p * 2)
  .append("g")
    .attr("transform", "translate(" + (r + p) + "," + (r + p) + ")");   

var partition = d3.layout.partition()
    .sort(null)
    .value(function(d) { return d.depth; })
    //.parent(function(d) {return purposeCodes.filter(function (p) {p.code == d.parent})[0] } )
    .children(function(d) {
        if (d.children) {
          return d.children.map(function(c) {return purposeCodes.filter(function (p) {p.code == c})[0]}) 
        }
        else {
          return []
        }
      })

    
var nodes = partition.nodes(purposeCodes.filter(function(d) {return d.parent == null }))
    ;

var arc = d3.svg.arc()
    .startAngle(function(d,i) {return Math.max(0, Math.min(2 * Math.PI, x(d.x))); })
    .endAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx))); })
    .innerRadius(function(d,i) {return Math.max(0, d.y ? y(d.y) : 0);})
    .outerRadius(function(d) { return Math.max(0, y(d.y + d.dy)); });

var path = vis.selectAll("path").data(nodes);
  path.enter().append("path")
      .attr("id", function(d, i) { return "path-" + i; })
      .attr("class", "wedge")
      .attr("d", arc)
      .style("fill", function(d, i) {return revColor(i);})
      .style("stroke", "#000")
      .style("stroke-weight", .5)
      .style("cursor", "pointer")
      .on("click", click)
    .append('title')
      .text(function(d) {return d.name})


      
function click(d) {

    path.transition()
      .duration(duration)
	  .ease('sin')
      .attrTween("d", arcTween(d));
}



  
function arcTween(d) {
  var my = maxY(d),
      mx = maxX(d),
      xd = d3.interpolate(x.domain(), [d.x, mx]),
      //xr = d3.interpolate(x.range(), [d.x ? 2 * Math.PI : 0, 2 * Math.PI])
      yd = d3.interpolate(y.domain(), [d.y, my]),
      yr = d3.interpolate(y.range(), [d.y ? 20 : 0, r]);
  return function(d) {
    return function(t) { x.domain(xd(t)); y.domain(yd(t)).range(yr(t)); return arc(d); };
  };
}

function maxY(d) {
  return d.children ? Math.max.apply(Math, d.children.map(maxY)) : d.y + d.dy;
}

function maxX(d) {
  return d.children ? Math.max.apply(Math, d.children.map(maxX)) : d.x + d.dx;
}

function isParentOf(p, c) {
  if (p === c) return true;
  if (p.children) {
    return p.children.some(function(d) {
      return isParentOf(d, c);
    });
  }
  return false;
}


$('#path-0').children().text('All')

</script>